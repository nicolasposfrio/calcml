<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Produto</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #fffbea; color: #5a4a00; }
    .calc { display: flex; flex-direction: column; gap: 1rem; max-width: 400px; margin: auto; }
    .field { display: flex; align-items: center; gap: 0.5rem; }
    label { width: 160px; color: #7a6300; }
    input { flex: 1; padding: 0.5rem; font-size: 1rem; border: 1px solid #e0c200; border-radius: 4px; background-color: #fff8cc; color: #5a4a00; }
    .result { display: flex; align-items: center; gap: 0.5rem; font-size: 1.25rem; background: #fff3b0; padding: 0.75rem; border-radius: 4px; border: 1px solid #e0c200; }
    .result label { font-weight: bold; color: #7a6300; }
  </style>
</head>
<body>
  <div class="calc">
    <div class="field">
      <label for="inpE2">Valor a receber (R$)</label>
      <input id="inpE2" type="number" step="0.01" />
    </div>
    <div class="field">
      <label for="inpE3">Comissão (%)</label>
      <input id="inpE3" type="number" step="0.01" />
    </div>
    <div class="field">
      <label for="inpE4">Frete (R$)</label>
      <input id="inpE4" type="number" step="0.01" />
    </div>
    <div class="result">
      <label>Valor para anunciar (R$)</label>
      <span id="resultado">–</span>
    </div>
  </div>

  <script>
    function calcularValorParaAnunciar(E2_raw, E3_raw, E4) {
      E2_raw = parseFloat(E2_raw) || 0;
      E3_raw = parseFloat(E3_raw) || 0;
      E4 = parseFloat(E4) || 0;

      const comm = E3_raw > 1 ? E3_raw / 100 : E3_raw;
      const divisor = 1 - comm;
      if (divisor <= 0) {
        return 'Erro';
      }

      const opc1 = (E2_raw + 6) / divisor;
      const opc2 = (E2_raw + E4) / divisor;

      if (opc1 >= 79 && E4 === 0) {
        return 'FRETE';
      } else if (opc2 <= 79) {
        return opc1.toFixed(2);
      } else {
        return opc2.toFixed(2);
      }
    }

    function calcular() {
      const E2 = document.getElementById('inpE2').value;
      const E3 = document.getElementById('inpE3').value;
      const E4 = document.getElementById('inpE4').value;
      const resultado = calcularValorParaAnunciar(E2, E3, E4);
      document.getElementById('resultado').textContent = resultado;
    }

    document.getElementById('inpE2').addEventListener('input', calcular);
    document.getElementById('inpE3').addEventListener('input', calcular);
    document.getElementById('inpE4').addEventListener('input', calcular);
  </script>
</body>
</html>
